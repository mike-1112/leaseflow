<%# Renders a single Lead row with actions for email/SMS contact %>
<div
  class="bg-white p-4 rounded shadow flex flex-col md:flex-row items-start md:items-center justify-between gap-3 border border-gray-200"
  id="lead-<%= lead.id %>"
  data-lead-id="<%= lead.id %>"
  data-controller="lead"
>
  <div class="flex-1 min-w-0">
    <div class="font-semibold text-gray-900 truncate">
      <%= lead.full_name.presence || "(No Name)" %>
    </div>
    <div class="text-gray-600 text-sm truncate">
      <strong>Email:</strong> <%= lead.email %>
      <% if lead.phone.present? %>
        &nbsp;|&nbsp; <strong>Phone:</strong> <%= lead.phone %>
      <% end %>
      <% if lead.property.present? %>
        &nbsp;|&nbsp; <strong>Property:</strong> <%= lead.property %>
      <% end %>
    </div>
    <% if lead.message.present? %>
      <div class="mt-1 text-gray-700 text-xs"><%= truncate(lead.message, length: 120) %></div>
    <% end %>
    <% if lead.created_at %>
      <div class="text-gray-400 text-xs mt-1">Submitted <%= time_ago_in_words(lead.created_at) %> ago</div>
    <% end %>
    <% if lead.contacted_at %>
      <div class="text-green-600 text-xs mt-1 font-medium">Contacted <%= time_ago_in_words(lead.contacted_at) %> ago</div>
    <% end %>
  </div>

  <div class="flex flex-row gap-2 mt-2 md:mt-0">
    <%= button_to "Send Email",
          send_email_lead_path(lead),
          method: :post,
          remote: true,
          form: { data: { turbo: false } },
          class: "bg-indigo-600 text-white px-3 py-1 rounded hover:bg-indigo-700 text-sm",
          data: { action: "lead#sendEmail" } %>

    <%= button_to "Send SMS",
          send_sms_lead_path(lead),
          method: :post,
          remote: true,
          form: { data: { turbo: false } },
          class: "bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 text-sm",
          data: { action: "lead#sendSms" } %>
  </div>
</div>